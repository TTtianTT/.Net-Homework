<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="referrer" content="never" />
    <meta name="description" content="SpringBoot起飞之路-整合Swagger2和Swagger3" />
    <meta property="og:description" content="SpringBoot起飞之路-整合Swagger2和Swagger3" />
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>(九) SpringBoot起飞之路-整合/集成Swagger 2 And 3 - BWH_Steven - 博客园</title>
    <link id="favicon" rel="shortcut icon" href="//common.cnblogs.com/favicon.svg" type="image/svg+xml" />
    
    <link rel="stylesheet" href="/css/blog-common.min.css?v=jzhy9Oyg5XODXo8F4hsEOQFzKCPYRKZCYc011rNEfQo" />
    <link id="MainCss" rel="stylesheet" href="/skins/codinglife/bundle-codinglife.min.css?v=dij5UHLPkhCwoV5SpUeOW7BnKC0vZ5-8GYi-drRcxLA" />
    
    <link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="/skins/codinglife/bundle-codinglife-mobile.min.css?v=JtOonyglmq10yOLdtvmh-WsVtFwm8HRB8mR_g_TGArQ" />
    
    <link type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/ideal-20/rss" />
    <link type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/ideal-20/rsd.xml" />
    <link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/ideal-20/wlwmanifest.xml" />
    <script>
        var currentBlogId = 516657;
        var currentBlogApp = 'ideal-20';
        var cb_enable_mathjax = false;
        var isLogined = false;
        var isBlogOwner = false;
        var skinName = 'CodingLife';
        var visitorUserId = '';
    </script>
        <script>
            var currentPostDateAdded = '2020-10-11 09:50';
        </script>
    <script src="https://common.cnblogs.com/scripts/jquery-2.2.0.min.js"></script>
    <script src="/js/blog-common.min.js?v=fLUEwRea4WeqlJe_CLnNunLQZl_ViJFLgKpcNDuKptI"></script>
    
    
    
</head>
<body>
    <a name="top"></a>
    <div id="top_nav" class="navbar">
        <nav id="nav_main" class="navbar-main">
            <ul id="nav_left" class="navbar-list navbar-left">
                <li class="navbar-branding">
                    <a href="https://www.cnblogs.com/" title="开发者的网上家园"><img src="/images/logo.svg?v=R9M0WmLAIPVydmdzE2keuvnjl-bPR7_35oHqtiBzGsM" alt="博客园Logo" /></a>
                </li>
                <li><a href="/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-sitehome')">首页</a></li>
                <li><a href="https://news.cnblogs.com/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-news')">新闻</a></li>
                <li><a href="https://q.cnblogs.com/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-q')">博问</a></li>
                <li><a id="nav_brandzone" href="https://brands.cnblogs.com/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-brands')">专区</a></li>
                <li><a href="https://ing.cnblogs.com/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-ing')">闪存</a></li>
                <li><a href="https://edu.cnblogs.com/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-edu')">班级</a></li>
            </ul>
            <ul id="nav_right" class="navbar-list navbar-right">
                <li>
                    <form id="zzk_search" class="navbar-search" action="https://zzk.cnblogs.com/s" method="get">
                        <input name="w" id="zzk_search_input" placeholder="代码改变世界" type="text" tabindex="3" />
                        <button type="submit" id="zzk_search_button">
                            <img src="/images/aggsite/search.svg" alt="搜索" />
                        </button>
                    </form>
                </li>
                <li id="navbar_login_status" class="navbar-list">
                    <a id="navblog-myblog-icon" class="navbar-user-info navbar-blog" href="https://passport.cnblogs.com/GetBlogApplyStatus.aspx" alt="我的博客" title="我的博客">
                        <img id="myblog_icon" class="navbar-icon" src="/images/aggsite/myblog.svg" alt="我的博客" />
                    </a>
                    <a class="navbar-user-info navbar-message navbar-icon-wrapper" href="https://msg.cnblogs.com/" alt="短消息" title="短消息">
                        <img id="msg_icon" class="navbar-icon" src="/images/aggsite/message.svg?v=oS4PkibyMjZ9rGD5XAcLt99uW_s76Javy2up4dbnZNY" alt="短消息" />
                        <span id="msg_count" style="display: none"></span>
                    </a>
                    <div id="user_info" class="navbar-user-info dropdown">
                        <a class="dropdown-button" href="https://home.cnblogs.com/">
                            <img id="user_icon" class="navbar-avatar" src="/images/aggsite/avatar-default.svg" alt="用户头像" />
                        </a>
                        <div class="dropdown-menu">
                            <a id="navblog-myblog-text" href="https://passport.cnblogs.com/GetBlogApplyStatus.aspx">我的博客</a>
                            <a href="https://home.cnblogs.com/">我的园子</a>
                            <a href="https://account.cnblogs.com/settings/account">账号设置</a>
                            <a href="javascript:void(0)" onclick="logout();">退出登录</a>
                        </div>
                    </div>
                    <a class="navbar-anonymous" href="https://account.cnblogs.com/signup/">注册</a>
                    <a class="navbar-anonymous" href="https://account.cnblogs.com/signin/?returnUrl=https://www.cnblogs.com/">登录</a>
                </li>
            </ul>
        </nav>
    </div>

    
    
<!--done-->
<div id="home">
<div id="header">
	<div id="blogTitle">
        <a id="lnkBlogLogo" href="https://www.cnblogs.com/ideal-20/"><img id="blogLogo" src="/skins/custom/images/logo.gif" alt="返回主页" /></a>		
		
<!--done-->
<h1><a id="Header1_HeaderTitle" class="headermaintitle HeaderMainTitle" href="https://www.cnblogs.com/ideal-20/">BWH_Steven</a>
</h1>
<h2>

</h2>




		
	</div><!--end: blogTitle 博客的标题和副标题 -->
	<div id="navigator">
		
<ul id="navList">
<li><a id="blog_nav_sitehome" class="menu" href="https://www.cnblogs.com/">
博客园</a>
</li>
<li>
<a id="blog_nav_myhome" class="menu" href="https://www.cnblogs.com/ideal-20/">
首页</a>
</li>
<li>

<a id="blog_nav_newpost" class="menu" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">
新随笔</a>
</li>
<li>
<a id="blog_nav_contact" class="menu" href="https://msg.cnblogs.com/send/BWH_Steven">
联系</a></li>
<li>
<a id="blog_nav_rss" class="menu" href="javascript:void(0)" data-rss="https://www.cnblogs.com/ideal-20/rss/">
订阅</a>
<!--<partial name="./Shared/_XmlLink.cshtml" model="Model" /></li>--></li>
<li>
<a id="blog_nav_admin" class="menu" href="https://i.cnblogs.com/">
管理</a>
</li>
</ul>


		<div class="blogStats">
			
			<span id="stats_post_count">随笔 - 
103&nbsp; </span>
<span id="stats_article_count">文章 - 
0&nbsp; </span>
<span id="stats-comment_count">评论 - 
19</span>

			
		</div><!--end: blogStats -->
	</div><!--end: navigator 博客导航栏 -->
</div><!--end: header 头部 -->

<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		<div id="post_detail">
    <!--done-->
    <div id="topics">
        <div class="post">
            <h1 class = "postTitle">
                
<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ideal-20/p/13796314.html">
    <span>(九) SpringBoot起飞之路-整合/集成Swagger 2 And 3</span>
    


</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                
    <div id="cnblogs_post_description" style="display: none">
        SpringBoot起飞之路-整合Swagger2和Swagger3
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
    <p><img src="//p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/649fbeb999f744b697048d65b22d927f~tplv-k3u1fbpfcp-zoom-1.image" alt="" loading="lazy"></p>
<p>兴趣的朋友可以去了解一下其他几篇，你的赞就是对我最大的支持，感谢大家！</p>
<p>(一) SpringBoot起飞之路-HelloWorld</p>
<p>(二) SpringBoot起飞之路-入门原理分析</p>
<p>(三) SpringBoot起飞之路-YAML配置小结（入门必知必会）</p>
<p>(四) SpringBoot起飞之路-静态资源处理</p>
<p>(五) SpringBoot起飞之路-Thymeleaf模板引擎</p>
<p>(六) SpringBoot起飞之路-整合JdbcTemplate-Druid-MyBatis</p>
<p>(七) SpringBoot起飞之路-整合SpringSecurity</p>
<p>(八) SpringBoot起飞之路-整合Shiro</p>
<p><strong>说明：</strong></p>
<ul>
<li>3.0 的版本没怎么用过，只是进行了简单的整合，或许会有一些不完善的地方，欢迎大家交流分享</li>
<li>SpringBoot 起飞之路 系列文章的源码，均同步上传到 github 了，有需要的小伙伴，随意去 down
<ul>
<li><a href="https://github.com/ideal-20/Springboot-Study-Code">https://github.com/ideal-20/Springboot-Study-Code</a></li>
</ul>
</li>
</ul>
<h1 id="一--初识-swagger">一  初识 Swagger</h1>
<p>跳过铺垫，请直接翻越到 第二大点 ~</p>
<h2 id="一-先谈谈前后端分离">(一) 先谈谈前后端分离</h2>
<p>在最早的 JavaWeb 时代的时候，如果想要返回一个页面，你需要一行一行的去 print，如果遇到变量，还需要自己进行字符串的拼接</p>
<pre><code class="language-java">Public class TestServlet extends HttpServlet {
	@Override  
    public void doGet(HttpServletRequest request, HttpServletResponseresp response) 
            throws ServletException, IOException {  
        String name = req.getParameter("name");  
        String age = req.getParameter("age");  
        PrintWriter out = resp.getWriter();  
        out.println("&lt;html&gt;");  
        out.println("&lt;head&gt;&lt;title&gt;展示数据&lt;/title&gt;&lt;/head&gt;");  
        out.println("&lt;body&gt;name:" + name + "&lt;br/&gt; age: " + age +"&lt;/body&gt;");  
        out.println("&lt;/html&gt;");       
    } 
}
</code></pre>
<p>接着 JSP 就出现了，其本质虽然还是一个 Servlet，不过编写一个 JSP 的方式和编写 HTML 的是基本一致的，但是 JSP 开始允许我们在页面中通过 <code>%%</code> 引入 Java 代码，也就是说我们可以通过在 JSP 页面中通过书写 Java 代码达到显示动态内容的效果，例如在 JSP 中定义方法、书写控制台输出语句等等，大部分你能想到的逻辑都可以在这里来做</p>
<p>后来一看这不行啊，业务逻辑和视图逻辑都混一块了，越写越乱，一个页面就几百行甚至上千行，真可怕啊，后来大家就想了个法子，用 MVC 来解耦啊，把 JSP 的业务抽取出来交给后台的 Serlvet 去做，JSP 用来承载数据，展示页面</p>
<p>如下代码：从 session 中取到数据，然后再 JSP 中进行遍历，不过这段代码有简单用了一些标签，这是我们后面要说的</p>
<blockquote>
<p>最后 JSP 会被编译成 Servlet</p>
</blockquote>
<pre><code class="language-jsp">&lt;%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%&gt;
&lt;%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %&gt;
&lt;%@page import="cn.ideal.pojo.Good" %&gt;
&lt;!-- 
   请求 /index.do 进行初始化
--&gt;
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"&gt;
&lt;html&gt;  
   &lt;body&gt;
    &lt;img src="img/cart.jpg" height="60px" width="60px"&gt;
    &lt;a href="cart.view"&gt;已采购
    &lt;c:out value="${sumNum}" default="没有任何"/&gt;商品
    &lt;/a&gt;&lt;br&gt;
   &lt;br&gt;
	&lt;table border="1"&gt;    
   &lt;%
      ArrayList&lt;Good&gt; goodList = (ArrayList&lt;Good&gt;)session.getAttribute("goodList");
      for (Good good : goodList){ 
        out.println("&lt;tr&gt;") ; 
        out.println("&lt;td&gt; &lt;img src='" + good.getGoodImg() + "'&gt; &lt;/td&gt;");
        String id = good.getGoodId();
        out.println("&lt;td&gt; &lt;a href=shopping.view?id=" + id + "&gt;采购&lt;/a&gt;&lt;/td&gt;");
        out.println("&lt;/tr&gt;"); 
       } 
    %&gt;
    &lt;/table&gt;&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>虽然 JSP 不处理业务逻辑了，看起来也没那么臃肿了，但是如上所示， JSP 想获取 Servlet传来 的一些内容，仍然需要通过 <code>%%</code> 去获取，例如拿到后遍历，判断等内容还需要自己在JSP中写 Java 代码</p>
<p>EL 和 JSTL 表达式就来了，通过一些定义好的标签，简单的拿到数据以及展示</p>
<pre><code class="language-jsp">&lt;%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%&gt;
&lt;%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%&gt;
&lt;!-- 
   请求 /index.do 进行初始化
--&gt;
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"&gt;
&lt;html&gt;  
   &lt;body&gt;
    &lt;img src="img/cart.jpg" height="60px" width="60px"&gt;
    &lt;a href="showCart.jsp"&gt;已采购
    
    &lt;c:out value="${sessionScope.cart.sumNum}" default="没有任何"/&gt;品
    &lt;/a&gt;&lt;br&gt;
   &lt;br&gt;
	&lt;table border="1"&gt;    
    &lt;c:forEach var="good" items="${cart.goodList}"&gt;
    &lt;tr&gt;
    	&lt;td&gt;&lt;img src='${good.goodImg}'&gt;&lt;/td&gt;
    	&lt;td&gt;&lt;c:out value='${good.getPrice()}'/&gt; 元&lt;/td&gt;
   		&lt;td&gt;&lt;a href="shopping.view?id=${good.bookId}&amp;type=1&amp;method=1"&gt;采购&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;/c:forEach&gt;
    &lt;/table&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>再到后来，Freemarker、Thymeleaf、Velocity 等，模板引擎就来了，他们和 JSP 的表达式写法很相似，有自己的一套表达式来拿到并且处理数据，例如这样：</p>
<pre><code class="language-html">&lt;table border="1"&gt;
  &lt;tr&gt;
    &lt;th&gt;Name&lt;/th&gt;
    &lt;th&gt;Age&lt;/th&gt;
  &lt;/tr&gt;
  &lt;tr th:each="user : ${userList}"&gt;
    &lt;td th:text="${user.nickname}"&gt;NULL&lt;/td&gt;
    &lt;td th:text="${user.age}"&gt;0&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
</code></pre>
<p>这样一套老开发模式，实际上大部分压力都放在了后端人员上，因为例如前端发来一份 html，后端还需要修改为 JSP ，也就是用标签替换其中一些固定的内容，实现动态效果，但是项目比较大的情况下，不管从人力亦或是开发成本来看都是不合适的，而且术业有专攻，如果后端只需要管自己后台业务的事情就行了该多好</p>
<p>这个时候前端就开始异军突起了，他们开始只使用简单 HTML、CSS 来展示数据，也就是纯粹的页面展示，通过 JS，把数据请求得到的数据进行填充，最开始可能会使用操作 DOM，但是随着前端框架的完善，例如现在常见的 Vue、Angular，前端都开始用 MVC 这套，也就是 html 作为视图，js作为控制器，异步请求，通过标签来展示数据，直接把数据填充到 html 页面中</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="en" xmlns:v-on="http://www.w3.org/1999/xhtml"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;title&gt;Title&lt;/title&gt;
  &lt;style&gt;
    [v-clock] {
      display: none;
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div id="hello-8" v-clock&gt;
  &lt;div&gt;{{info.name}}&lt;/div&gt;
  &lt;div&gt;{{info.blog}}&lt;/div&gt;
  &lt;div&gt;{{info.about.country}}&lt;/div&gt;
  &lt;div&gt;{{info.about.phone}}&lt;/div&gt;
  &lt;div&gt;{{info.students[0].name}}&lt;/div&gt;
&lt;/div&gt;

&lt;script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"&gt;&lt;/script&gt;
&lt;script src="https://unpkg.com/axios/dist/axios.min.js"&gt;&lt;/script&gt;

&lt;script&gt;
    var vm = new Vue({
        el: "#hello-8",
        data() {
            return {
                info: {}
            }
        },
        mounted() {
            axios.get("../json/data.json").then(response =&gt; (this.info = response.data));
        }
    })
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>这就意味着，后端只需要给出根据前端接口需要的，返回对应数据（例如 JSON）就可以了</p>
<p>这种通过 API 进行交互的方式实际上也是松耦合的，双方都比较灵活且独立</p>
<h2 id="二-为什么用-swagger">(二) 为什么用 Swagger</h2>
<p>前面感觉一直在说题外话，但是问题的关键就在于这一点，这种模块开发，前后分离的情况下，前端或者后端的沟通就会极为重要，有时候没能做到及时的协商，就会出现很多意想不到的问题，同时前后端分离大行其道，也就代表着接口调用会大量的出现，如果你的 API 同时对接 Web、IOS、Android 等多个开发，为了减少沟通的代价，那必然就是要写文档的，用来记录所有接口的细节</p>
<p>但是如何创建一个繁多且复杂的文档就是一个非常吃力的事情了，毕竟要考虑的地方非常多，同时随着代码的迭代，API 文档更新管理一定要严格把控，否则都会带来不必要的麻烦，显然传统的 Wiki</p>
<p>手写文档一定是一个非常麻烦的过程，Swagger 他就来了</p>
<h2 id="三-什么是-swagger">(三) 什么是 Swagger</h2>
<blockquote>
<p>Swagger 是一个规范和完整的框架，用于生成、描述、调用和可视化 RESTful 风格的 Web 服务</p>
<p>其总体目标是使客户端和文件系统作为服务器以同样的速度来更新。文件的方法，参数和模型紧密集成到服务器端的代码，允许API来始终保持同步。</p>
</blockquote>
<p>刚开始的时候，Swagger 只是一种规范，产品开发迭代的时候，通过更新描述文件就可以生成接口文档和客户/服务端代码，但是开发人员时不时就会忘记更新此文件，直接改代码，后序，作为大头的 Spring 就将其正式纳入麾下，建立了 Spring-swagger项目，即现在的 springfox(swagger2)</p>
<p>其最大的优点就是，能实时同步 API 和文档，只需要通过简单的整合亦配合一些注解，就可以体验到其丰富的功能</p>
<p>通常就目前为止，大部分项目中还是在用 Swagger2，通过maven仓库也可以看到，2.9.2 是使用率最高的，同样后面我们还会演示一下 Swagger3  的版本，因为它毕竟是今年刚出的，其简化了很多配置，个人感觉还算香</p>
<p>说明</p>
<p><img src="//p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3c44a59a9f034fd08de41c41e5c27311~tplv-k3u1fbpfcp-zoom-1.image" alt="" loading="lazy"></p>
<h1 id="二-springboot-集成-swagger-2">二 Springboot 集成 Swagger 2</h1>
<h2 id="一-依赖及初始化">(一) 依赖及初始化</h2>
<p>先初始化一个 Springboot 项目</p>
<h3 id="1-引入依赖">(1) 引入依赖</h3>
<pre><code class="language-xml">&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger2 --&gt;
&lt;dependency&gt;
   &lt;groupId&gt;io.springfox&lt;/groupId&gt;
   &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;
   &lt;version&gt;2.9.2&lt;/version&gt;
&lt;/dependency&gt;
&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger-ui --&gt;
&lt;dependency&gt;
   &lt;groupId&gt;io.springfox&lt;/groupId&gt;
   &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;
   &lt;version&gt;2.9.2&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h3 id="2-编写controller">(2) 编写Controller</h3>
<pre><code class="language-java">@RestController
@RequestMapping("test/")
public class TestController {
    @RequestMapping("/testA")
    public String testA(){
        return "This is a test";
    }
}
</code></pre>
<h3 id="3-创建-swagger-配置类">(3) 创建 Swagger 配置类</h3>
<pre><code class="language-java">@Configuration // 配置类
@EnableSwagger2 // 开启Swagger2的自动配置
public class SwaggerConfig {  
    // 暂时为空
}
</code></pre>
<p>注：我们使用的是 Swagger2</p>
<h3 id="4-访问测试">(4) 访问测试</h3>
<p>先测试一下 controller 有没有问题，接着通过如下地址就可以访问到 swagger 的界面</p>
<p><a href="http://localhost:8080/swagger-ui.html">http://localhost:8080/swagger-ui.html</a></p>
<p>可以看到大概这个页面分为三个部分，上面就是一些介绍信息，中间就是一个一个的接口信息，下面是实体</p>
<p><img src="//p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0ce667eaa08745e99976c146b21d0854~tplv-k3u1fbpfcp-zoom-1.image" alt="" loading="lazy"></p>
<h2 id="二-配置-swagger-信息">(二) 配置 Swagger 信息</h2>
<p>我们需要在我们自定义的 Swagger 配置类中配置一些内容，就需要引入一个 Bean，Swagger 的实例Bean 就是 Docket，所以我们需要实例化一个 Docket</p>
<pre><code class="language-java">/**
 * 配置 docket 和 Swagger 的具体参数
 * @return
 */
@Bean 
public Docket docket() {
    return new Docket(DocumentationType.SWAGGER_2)；
}
</code></pre>
<p>大家可以点开 Docket 源码，然后可以看到它引入了 ApiInfo 这个类，其中定义了一些基本的信息例如，版本，标题等等</p>
<pre><code class="language-java">public static final Contact DEFAULT_CONTACT = new Contact("", "", "");
  public static final ApiInfo DEFAULT = new ApiInfo("Api Documentation", "Api Documentation", "1.0", "urn:tos",
          DEFAULT_CONTACT, "Apache 2.0", "http://www.apache.org/licenses/LICENSE-2.0", new ArrayList&lt;VendorExtension&gt;());

  private final String version;
  private final String title;
  private final String description;
  private final String termsOfServiceUrl;
  private final String license;
  private final String licenseUrl;
  private final Contact contact;
  private final List&lt;VendorExtension&gt; vendorExtensions;
</code></pre>
<p>大家可能已经看出来了，这个地方的内容，就是负责刚开我们打开那个 swagger-ui 页面的头部文档信息的，其默认值例如 Api Documentation 、1.0 、Apache 2.0 大家可以自己对照一下</p>
<p>好了，知道了它的类和基本结构，我们就要自定义这些信息了</p>
<pre><code class="language-java">/**
 * 配置文档信息
 * @return
 */
private ApiInfo apiInfo() {
    Contact contact = new Contact("BWH_Steven", "https://www.ideal-20.cn", "ideal_bwh@163.com");
    return new ApiInfo(
            "Swagger2学习——理想二旬不止", // title-标题
            "学习演示如何配置Swagger2", // description-描述
            "v1.0", // version-版本
            "https://www.ideal-20.cn", // termsOfServiceUrl-组织链接
            contact, // contact-联系人信息
            "Apach 2.0 许可", // license-许可
            "许可链接", // licenseUrl-许可连接
            new ArrayList&lt;&gt;()// vendorExtensions-扩展
    );
}
</code></pre>
<p>配置完后，我们还没有把它和 Docket 实例挂起钩来</p>
<pre><code class="language-java">/**
 * 配置 docket 和 Swagger 的具体参数
 * @return
 */
@Bean
public Docket docket() {
   return new Docket(DocumentationType.SWAGGER_2).apiInfo(apiInfo());
}
</code></pre>
<p>再次访问地址，看看效果</p>
<p><a href="http://localhost:8080/swagger-ui.html">http://localhost:8080/swagger-ui.html</a></p>
<p><img src="//p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ad06307d17fd459a8a3d19219400a023~tplv-k3u1fbpfcp-zoom-1.image" alt="" loading="lazy"></p>
<h2 id="三-配置自定义扫描方式配置">(三) 配置自定义扫描方式配置</h2>
<h3 id="1-如何配置">(1) 如何配置</h3>
<p>留心的朋友大家看到，第一次访问的时候上面还有一个默认的 basic-seeor-controller，而后面则没有了，这是因为我在演示配置信息的时候，忘记把我自定义扫描方式给注释掉了</p>
<p><img src="//p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/18b921a915bb45c4b52f1b15e3caa78e~tplv-k3u1fbpfcp-zoom-1.image" alt="" loading="lazy"></p>
<p>所以，我们现在来提一下如何自己定义扫描哪些接口</p>
<p>在 Docket 中可以通过调用  select() 方法来配置扫描的接口，要使用这个方式就必须在其后跟上 build，这是设计模式中的一种，建造者模式，具体如何配置呢，只需要在 select 和 build 中 apis 即可，因为 apis 中需要一个<code> requestHandlerSelector</code>，所以 <code>requestHandlerSelector</code> 就是我们最终要具体配置的地方</p>
<p>先上一份例子，对照上面的解释看</p>
<pre><code class="language-java">/**
 * 配置 docket 和 Swagger 的具体参数
 * @return
 */
@Bean
public Docket docket() {
    return new Docket(DocumentationType.SWAGGER_2)
    	.apiInfo(apiInfo())
        // 通过.select()方法，去配置扫描接口
        .select()
        // RequestHandlerSelectors 配置扫描接口的具体方式
        .apis(RequestHandlerSelectors.basePackage("cn.ideal.controller")) 
        .build();
}
</code></pre>
<h3 id="2-可选扫描方式">(2) 可选扫描方式</h3>
<p>大家可以点进去 RequestHandlerSelectors 看一下，除了 basePackage 还有哪些</p>
<p><code>any()</code></p>
<ul>
<li>扫描项目中的所有接口</li>
</ul>
<p><code>none() </code></p>
<ul>
<li>不扫描任何接口</li>
</ul>
<p><code>withMethodAnnotation(final Class&lt;? extends Annotation&gt; annotation)</code></p>
<ul>
<li>通过方法上的注解扫描，如 withMethodAnnotation(GetMapping.class) 只扫描 get 请求</li>
</ul>
<p><code>withClassAnnotation(final Class&lt;? extends Annotation&gt; annotation)</code></p>
<ul>
<li>通过类上的注解扫描，如 .withClassAnnotation(Controller.class) 只扫描有 controller 注解的类中的接口</li>
</ul>
<p><code>basePackage(final String basePackage) </code></p>
<ul>
<li>根据包路径扫描接口</li>
</ul>
<h3 id="3-配置扫描过滤">(3) 配置扫描过滤</h3>
<p>当你写好 select 和 build 后，其实两者中间就只提供调用 apis 和 paths 了，而 paths 就是现在要说的扫描过滤</p>
<pre><code class="language-java">/**
 * 配置 docket 和 Swagger 的具体参数
 * @return
 */
@Bean
public Docket docket() {
    return new Docket(DocumentationType.SWAGGER_2)
            .apiInfo(apiInfo())
            .select()
            .apis(RequestHandlerSelectors.basePackage("cn.ideal.controller"))
            // 配置如何通过 path 过滤
        	// 这里只扫描请求以/test 开头的接口
            .paths(PathSelectors.ant("/test/**"))
            .build();
}
</code></pre>
<p>可选方式</p>
<p><code>any()</code></p>
<ul>
<li>扫描所有请求</li>
</ul>
<p><code>none() </code></p>
<ul>
<li>任何请求都不扫描</li>
</ul>
<p><code>regex(final String pathRegex) </code></p>
<ul>
<li>根据正则表达式</li>
</ul>
<p><code>ant(final String antPattern) </code></p>
<ul>
<li>通过 ant() 控制（如上代码，可以使用一些通配符）</li>
</ul>
<h2 id="四-配置-swagger-的开启和关闭">(四) 配置 Swagger 的开启和关闭</h2>
<p>通过在 Docket 中调用 <code>enable(boolean externallyConfiguredFlag)</code> 可以控制 Swagger 的开和关，也就是说，如果配置 <code>.enable(false)</code> 浏览器中访问就会出错</p>
<p>讲个实际点的例子，一般我们会在开发以及测试阶段开启 Swagger ，但是正式上线就会把它关掉</p>
<p>所以，我们得动态的让其进行配置</p>
<p>首先，我们先分别创建 dev 和 test 以及 prod，三个环境</p>
<ul>
<li>
<p>创建 application-dev.properties，设置 server.port=8080</p>
</li>
<li>
<p>创建 application-test.properties，设置 server.port=8081</p>
</li>
<li>
<p>创建 application-prod.properties，设置 server.port=8082</p>
</li>
</ul>
<pre><code class="language-java">/**
 * 配置 docket 和 Swagger 的具体参数
 * @return
 */
@Bean
public Docket docket(Environment environment) {

    // 设置要显示swagger的环境
    Profiles of = Profiles.of("dev", "test");
    // 判断当前是否处于该环境
    boolean flag = environment.acceptsProfiles(of);

    return new Docket(DocumentationType.SWAGGER_2)
            .apiInfo(apiInfo())
            // 通过 enable() 接收决定是否要显示
            .enable(flag)
            .select()
            .apis(RequestHandlerSelectors.basePackage("cn.ideal.controller"))
            .paths(PathSelectors.ant("/test/**"))
            .build();
}
</code></pre>
<p>在主配置 appplication.properties 中指定当前为开发版本 <code>spring.profiles.active=dev</code></p>
<p>这样就可以访问对应设置好的 8080 了，同理设置为别的，就只能访问别的</p>
<h2 id="五-配置分组">(五) 配置分组</h2>
<p>在 ui 界面其实大家可以注意到，右上角有一个 default，以及一个下拉选项（暂时还没内容）</p>
<p><img src="//p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3f80bf6fe7d14b6e8ae1bd31edb9718a~tplv-k3u1fbpfcp-zoom-1.image" alt="" loading="lazy"></p>
<p>这里就是一个分组的概念，也就是我们要实现 API 接口的分类</p>
<p>方法非常简单，只需要通过在 Docket 中，调用 <code>groupName() </code>即可</p>
<pre><code class="language-java">@Bean
public Docket docketA(){
    return new Docket(DocumentationType.SWAGGER_2).groupName("groupA");
}
@Bean
public Docket docketB(){
    return new Docket(DocumentationType.SWAGGER_2).groupName("groupB");
}
@Bean
public Docket docketC(){
    return new Docket(DocumentationType.SWAGGER_2).groupName("groupC");
}
</code></pre>
<p><img src="//p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a45bd5771cf74eafa858f9ac15c28047~tplv-k3u1fbpfcp-zoom-1.image" alt="" loading="lazy"></p>
<p>重启后，就可以看到分组的效果了，不同的组别里进行不同的配置，能达到不同的访问效果</p>
<h2 id="六-常用注解">(六) 常用注解</h2>
<h3 id="一-作用在类">(一) 作用在类</h3>
<h4 id="1-api">(1) @Api()</h4>
<p>写了一些常用的注解和其参数，不一定全，不过应该还是够用的</p>
<p>Swagger 配合注解更香喔 ~</p>
<p><code>@Api()</code>：表示这个类是 swagger 资源</p>
<ul>
<li>tags：表示说明内容，只写 tags 就可以省略属性名</li>
<li>value：同样是说明，不过会被 tags 替代</li>
</ul>
<pre><code class="language-java">@Api(value = "测试接口value", tags = "测试接口Tags")
@RestController
@RequestMapping("test/")
public class TestController {
	......
}
</code></pre>
<p>上面同时定义了 tags 和 value，最后显示的只有 tags ，两者都可以单独使用</p>
<p><img src="//p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8f8b23cfbc2148c080b2260f11231626~tplv-k3u1fbpfcp-zoom-1.image" alt="" loading="lazy"></p>
<h3 id="二-作用在方法">(二) 作用在方法</h3>
<h4 id="1-apioperation">(1) @ApiOperation()</h4>
<p><code>@ApiOperation()</code> ：对方法的说明，注解位于方法上</p>
<ul>
<li>value：方法的说明</li>
<li>notes：额外注释说明</li>
<li>response：返回的对象</li>
<li>tags：这个方法会被单独摘出来，重新分组</li>
</ul>
<pre><code class="language-java">@ApiOperation(
        value = "用户信息查询方法Value",
        notes = "这是用户信息查询方法的注释说明",
        response = User.class,
        tags = {"用户信息查询方法Tags"})
@GetMapping("/queryUser")
public User queryUser() {
	......
}
</code></pre>
<p><img src="//p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4f9fb713d1a34eccbb324ff2783ca7a4~tplv-k3u1fbpfcp-zoom-1.image" alt="" loading="lazy"></p>
<p>说明：注释需要点开每一个方法才能看到</p>
<p>补充：如果在方法上使用 @RequestMapping() 注解，那么文档中就会有各种类型的说明，例如 GET、POST 等等等等，所以一般我们会指定其请求类型，例如 <code>@GetMapping("/queryUser")</code></p>
<h4 id="2-apiparam">(2) @ApiParam()</h4>
<p><code>@ApiParam() </code>：对方法参数的具体说明</p>
<ul>
<li>name：参数名</li>
<li>value：参数说明</li>
<li>required：是否必填</li>
</ul>
<pre><code class="language-java">@ApiOperation(value = "用户登录方法", notes = "用户登录注释说明")
@PostMapping("/login")
public String login(@ApiParam(name = "username", value = "用户名", required = true) String username,
                    @ApiParam(name = "password", value = "密码", required = true) String password) {
    if ("123".equals(username) &amp;&amp; "123".equals(password)) {
        return "登录成功";
    } else {
        return "登录失败";
    }
}
</code></pre>
<p>点开这个方法，可以看到，这些注解都体现在文档中了</p>
<p><img src="//p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/04d7777ee9554ce491a187f7e4ff56e0~tplv-k3u1fbpfcp-zoom-1.image" alt="" loading="lazy"></p>
<h3 id="三-作用在模型类">(三) 作用在模型类</h3>
<h4 id="1-apimodel">(1) @ApiModel()</h4>
<p><code>@ApiModel()</code> 作用在模型类上，如 VO、BO ，表示对类进行说明</p>
<ul>
<li>value：代表模型的名称</li>
<li>description：一段描述</li>
</ul>
<h4 id="2-apimodelproperty">(2) @ApiModelProperty()</h4>
<p><code>@ApiModelProperty()</code> 作用在类方法和属性上，表示对属性的说明</p>
<ul>
<li>value：字段说明</li>
<li>name：重写属性名字</li>
<li>dataType：重写属性类型</li>
<li>required：是否必填</li>
<li>example：举例说明</li>
<li>hidden：隐藏</li>
</ul>
<p>（两者一起演示）可在文档首页，以及具体方法涉及到时，会显示此 model 说明信息</p>
<p><img src="//p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e34b998373924ce9bce88527e96ec7ee~tplv-k3u1fbpfcp-zoom-1.image" alt="" loading="lazy"></p>
<h1 id="三-springboot-集成-swagger3">三 Springboot 集成 Swagger3</h1>
<p>大部分内容上面都有提过，所以这里只说一些不同的地方</p>
<p>一个就是依赖可以用 3.0 的starter</p>
<p>其次就是配置中修改  return new Docket(DocumentationType.OAS_30)</p>
<p>同时不需要引入 <code>@EnableSwagger2</code> 注解了</p>
<p>都说启动类需要加 <code>@EnableOpenApi</code> , 试了一下，好像是不需要的</p>
<p><strong>※ 启动路径变成了</strong></p>
<p><a href="http://localhost:8080/swagger-ui/index.html">http://localhost:8080/swagger-ui/index.html</a></p>
<h2 id="一-引入依赖">(一) 引入依赖</h2>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;io.springfox&lt;/groupId&gt;
    &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;
    &lt;version&gt;3.0.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h2 id="二-配置类">(二) 配置类</h2>
<pre><code class="language-java">@Configuration
public class Swagger3Config {
    @Bean
    public Docket createRestApi(Environment environment) {
        // 设置要显示swagger的环境
        Profiles of = Profiles.of("dev", "test");
        // 判断当前是否处于该环境
        boolean flag = environment.acceptsProfiles(of);

        return new Docket(DocumentationType.OAS_30)
                .apiInfo(apiInfo())
                // 通过 enable() 接收决定是否要显示
                .enable(flag)
                // 通过.select()方法，去配置扫描接口
                .select()
                // RequestHandlerSelectors 配置扫描接口的具体方式
                .apis(RequestHandlerSelectors.basePackage("cn.ideal.controller"))
                .paths(PathSelectors.ant("/test/**"))
                .build();
    }

    private ApiInfo apiInfo() {
        Contact contact = new Contact("BWH_Steven", "https://www.ideal-20.cn", "ideal_bwh@163.com");
        return new ApiInfo(
                "Swagger3学习——理想二旬不止", // 标题
                "学习演示如何配置Swagger2", // 描述
                "v1.0", // 版本
                "https://www.ideal-20.cn", // 组织链接
                contact, // 联系人信息
                "Apache 2.0 许可", // 许可
                "许可链接", // 许可连接
                new ArrayList&lt;&gt;()// 扩展
        );
    }
}
</code></pre>
<p>看看效果</p>
<p><img src="//p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9c6f8727b3de467193567b1ac2dcdff6~tplv-k3u1fbpfcp-zoom-1.image" alt="" loading="lazy"></p>
<h1 id="四-swagger-测试">四 Swagger 测试</h1>
<p>Swagger 不仅仅是一个普通的文档，它还可以直接在生成的文档上进行测试，伴随着文档的说明，测试起来也非常方便</p>
<p>例如点击 Try it out 后，因为测试一个查询方法，是没有参数的，所以直接点击 Excute，就能看到响应结果了</p>
<p><img src="//p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/89e3258fa380483c922410fca66111b4~tplv-k3u1fbpfcp-zoom-1.image" alt="" loading="lazy"></p>
<p>响应结果</p>
<p><img src="//p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d7928b5b30ea4e8e8aeb81d5131ae786~tplv-k3u1fbpfcp-zoom-1.image" alt="" loading="lazy"></p>
<h1 id="五-结尾">五 结尾</h1>
<p>如果文章中有什么不足，欢迎大家留言交流，感谢朋友们的支持！</p>
<p>如果能帮到你的话，那就来关注我吧！如果您更喜欢微信文章的阅读方式，可以关注我的公众号</p>
<blockquote>
<p>在这里的我们素不相识，却都在为了自己的梦而努力 ❤</p>
<p>一个坚持推送原创开发技术文章的公众号：理想二旬不止</p>
</blockquote>
<p><img src="//p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a9001145e99f4d55b8ccd0e2eaf07d23~tplv-k3u1fbpfcp-zoom-1.image" alt="" loading="lazy"></p>

</div>
<div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
    <div id="blog_post_info"></div>
    <div class="clear"></div>
    <div id="post_next_prev"></div>
</div>
            </div>
            <div class="postDesc">posted @ 
<span id="post-date">2020-10-11 09:50</span>&nbsp;
<a href="https://www.cnblogs.com/ideal-20/">BWH_Steven</a>&nbsp;
阅读(<span id="post_view_count">58</span>)&nbsp;
评论(<span id="post_comment_count">1</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=13796314" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(13796314);return false;">收藏</a></div>
        </div>
	    
	    
    </div><!--end: topics 文章、评论容器-->
</div>
<script src="https://common.cnblogs.com/highlight/9.12.0/highlight.min.js"></script>
<script>markdown_highlight();</script>
<script>
    var allowComments = true, cb_blogId = 516657, cb_blogApp = 'ideal-20', cb_blogUserGuid = '91306edc-cf07-48df-fb99-08d6dc1f79f5';
    var cb_entryId = 13796314, cb_entryCreatedDate = '2020-10-11 09:50', cb_postType = 1;
    loadViewCount(cb_entryId);
</script><a name="!comments"></a>
<div id="blog-comments-placeholder"></div>
<script>
    var commentManager = new blogCommentManager();
    commentManager.renderComments(0);
</script>
<div id="comment_form" class="commentform">
    <a name="commentform"></a>
    <div id="divCommentShow"></div>
    <div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">刷新评论</a><a href="#" onclick="return RefreshPage();">刷新页面</a><a href="#top">返回顶部</a></div>
    <div id="comment_form_container"></div>
    <div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
    <div id="ad_t2"></div>
    <div id="opt_under_post"></div>
    <div id="cnblogs_c1" class="c_ad_block">
        <div id='div-gpt-ad-1592365906576-0' style='width: 300px; height: 250px;'></div>
    </div>
    <div id="under_post_news"></div>
    <div id="cnblogs_c2" class="c_ad_block">
        <div id='div-gpt-ad-1592366332455-0' style='width: 468px; height: 60px;'></div>
    </div>
    <div id="under_post_kb"></div>
    <div id="HistoryToday" class="c_ad_block"></div>
    <script type="text/javascript">
        fixPostBody();
        deliverBigBanner();
setTimeout(function() { incrementViewCount(cb_entryId); }, 50);        deliverT2();
        deliverC1C2();
        loadNewsAndKb();
        loadBlogSignature();
LoadPostCategoriesTags(cb_blogId, cb_entryId);        LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
        GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
        loadOptUnderPost();
        GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);
    </script>
</div>
	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->

	<div id="sideBar">
		<div id="sideBarMain">
			
<div id="sidebar_news" class="newsItem">
            <script>loadBlogNews();</script>
</div>

<div id="sidebar_ad"></div>
			<div id="blog-calendar" style="display:none"></div><script>loadBlogDefaultCalendar();</script>
			
			<div id="leftcontentcontainer">
				<div id="blog-sidecolumn"></div>
                    <script>loadBlogSideColumn();</script>
			</div>
			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
	</div><!--end: main -->
	<div class="clear"></div>
	<div id="footer">
		<!--done-->
Copyright &copy; 2020 BWH_Steven
<br /><span id="poweredby">Powered by .NET Core on Kubernetes</span>



	</div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->


    
</body>
</html>
